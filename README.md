
<div>
<img src="./img/nEEGlace.png" width="25%" class="center">
</div>

## nEEGlace
This is the project repository for the: **nEEGlace - a mounting system for EEG hardware for mobile ear-EEG recordings**

Hardware: [![License](https://img.shields.io/badge/License-CERN%20OHL%20S-orange.svg)](https://github.com/mgbleichner/nEEGlace/blob/master/LICENSE)  

| nEEGlace |
|--------|
|![nEEGlace](./img/panel_result.png  "nEEGlace")*The nEEGlace for beyond the lab ear-EEG recordings*|

## Components
* JBL Soundgear BTA [https://www.jbl.com/bluetooth-speakers/JBL+SOUNDGEAR+BTA.html](https://www.jbl.com/bluetooth-speakers/JBL+SOUNDGEAR+BTA.html)
* Smarting EEG Amplifier [https://mbraintrain.com/smarting/](https://mbraintrain.com/smarting/)
* cEEGrid connectors [https://ceegrid.com/](https://ceegrid.com)
* Jackplug

## The neck speaker
The neck speaker serves primarily as a comfortable to wear mount for the 
amplifier and the connectors. In addition to that, it allows to present and record sound. 
The original Bluetooth functionality and any control functionality of the neck speaker is lost, as all active electronic components are removed from the neck speaker. The amplifier is positioned where the battery was. 

## Disassemble neck speaker 
*  Remove mesh (A): The mesh material is clicked on the plastic part. The mesh material can be removed using a thin blade to lift it from the body. 
*  Unbolt all screws (B) 
*  Remove the  metal plate in the middle (C)
*  Carefully lift the left part of the lower part (D). There is a black glue at several locations,  that can be removed carefully. 
*  Carefully lift the right part (E). The only thing that keeps the top and bottom part together is the micro USB connector
*  Unbolt the screw (F).
*  Top (G-H) and bottom (I) parts are now detached from each other.


| Disassembly of neck speaker |
|--------|
|![Disassembly](./img/Panel_neckpiece_disassembly.png  "Disassembly of neck speaker")*Disassembly of neck speaker (A-I)*|




### Cut the mesh

* Cut the mesh at the flexible joints (A - B)
* The center part is not needed and is left open for the amplifier (C)

| Mesh preparation |
|--------|
|![Mesh preparation](./img/panel_cut_mesh.png  "Mesh preparation")*Mesh preparation (A-C)*|




## Disassemble amplifier 
* Remove the four grey plastic covers at the backside of the amplifier. 
* Unbolt the four screws at the backside of the amplifier. 
* Lift the backside from the amplifier. You find the amplifier board, the lithium battery and the connector (A). 
* Lift the amplifier out of the plastic casing (B)


`!!Do this at your own risk! If you do this, you will lose all manufacturer warranty! This may destroy your amplifier! The authors of this article are not responsible for any potential damage.`

* Before you unsolder the battery and the connector cable make sure that you know your cannel layout
* Unsolder the battery and the connector cable (C)

| Disassembly of amplifier |
|--------|
|![Disassembly of amplifier](./img/Panel_open_amp.png  "Disassembly of amplifier")*Disassembly of amplifier (A-C)*|

## Making room for amplifier casing
The amplifier will be placed in the center of the neck speaker (I, silver), where the batteries were located
To make room for the amplifier casing part of the neck speaker casing needs to be removed.
For this, we used a rotary power tool (Dremel). 

* Push the board as far as possible to the front edge of the neck piece (A, red arrow).
* Mark the left and right side. Add .5 cm on each side for the casing. 
* Mark the area you want to cut out (B-D).


| Preparing casing |
|--------|
|![Preparing casing](./img/Panel_measuring.png  "Preparing casing")*Preparing casing. Make room for the amplifier, A) The amplifier board needs to fit. Push the board as far as possible to the front edge of the neck piece (red) arrow. Mark the left and right side. Add .5 cm on each side for the casing. B-D) Mark the area you want to cut out.*|


| Cut casing |
|--------|
|![Cut casing](./img/Panel_cutting.png  "Cut casing")*Make vertical (A) and horizontal (B) cuts into the aluminum. Make sure to remove all cutting residuals (C) and clean the cutting edge (D).*|


* Make vertical (A) and horizontal (B) cuts into the aluminum. Make sure that you do not cut into the metal clasp (C)
* Remove all metal and rubber shavings (C)
* Clean the cutting edge (D) and remove again all metal shavings
* The result is shown in figure X (A). 

## Adjust Amplifier casing
The lower part of the amplifier will be glued to the 
neck speaker and needs to be adapted to follow the curvature of the neck speaker.
This part of the amplifier casing and the neck speaker should be large enough to fit the amplifier board. 
* Mark the curvature of the neck speaker on the amplifier casing (B-C)
* Cut the amplifier with a rotatory power tool (D)
* The part of the casing marked here with an white X (E) can be discarded
* There are a couple of plastic parts, inside the amplifier casing that need to be removed (F)


| Adjust  amplifier casing|
|--------|
|![Adjust  amplifier casing](./img/Panel2.png  "Adjust  amplifier casing")*Adjust the amplifier casing*|




## Combine amplifier casing and neck speaker casing
The amplifier casing is glued onto the neck speaker. 
* Remove all residual rubber  (A) to expose the bare metal (B)
* Put the neck piece a bit higher (C).
* Place the amplifier casing at the corresponding location
* Place something behind the casing to keep it in place 
* Glue the casing with 2-components Epoxy glue https://www.uhu.com/en/product-page.5485
* Let dry for at least 12 hours. 
* Turn the neck piece over and add another stripe of glue on the backside. 

| Add casing|
|--------|
|![Add casing](./img/Panel_add_casing.png  "Add casing")*Add casing*|


## Adding the jack plug
The neck speaker comes with Bluetooth. As the smarting amplifier communicates 
with Bluetooth as well, and as two Bluetooth connecting to a single devices are 
not possible, the neck speakers Bluetooth capabilities are removed.  
Furthermore, we had to remove the battery of the neck speaker to make room for 
the amplifier. To still be able to use the speaker and microphone functionality 
we added a jackplug.

### Making room for the jackplug
The jackplug goes where the neck speakers micro USB connector was. 
The area is large enough for a jackplug if you make the hole a bit larger (see pictures). 

* Remove the part of the plastic as indicated on (A) with pliers (B)
* The resulting hole (C) is just large enough to put the jackplug through (D), for a snug fit 


| Making room for jackplug|
|--------|
|![Making room for jackplug](./img/Panel_Jackplug.png  "Making room for jackplug")*Making room for jackplug*|





### Remove original wiring of neck speaker
* Remove all glue and foamed material (A - B).
* Remove control unit (C).
* Remove microphone (grey cable) on the right side (D).
* Cut speaker cable on the right side (E - F).
* Remove everything but the speakers and the respective cabling from the neck piece (G).
* View from below (H) and from above (I). Left and right side are not connected. 
* We end up with a red/black cable for the speakers and a grey cable for the microphone. 


| Remove wiring|
|--------|
|![Remove wiring](./img/Panel_remove_wiring.png  "Remove wiring")*Remove wiring*|


### Connecting the jackplug
* Prepare the speaker cable to connect to the jackplug and solder them like in the following picture:
### Prepare cEEGrid connectors
The cEEGrid connector has been designed to fit into mini edge card sockets as 
offered by [SAMTEC (MB1-120-01-L-S-01-SL-N)](https://www.samtec.com/products/mb1). 
In combination with a small proprietary printed circuit board (BCB, shown below), 
a flat-ribbon cable and touch-proof (or similar) connectors, cEEGrids can be 
connected to most available EEG systems. To facilitate soldering and lower the 
risk of bridges we recommend removing every second pin before assembling the connector.

If you want to reproduce or modify our connector, visit the fritzing website. 
[Download this file](http://ceegrid.com/download/smarting%20mit%20logo.fzz) for printing the PCB there.

* In our setup, channels R04a and R04b (i.e. right cEEGrid) serve as DRL and ref electrodes (in general you are free to choose their location)


### Solder connectors onto amplifier. 
The connector cables can be soldered onto either the front or the back of PCB board of the amplifier. 
When you buy the smarting amplifier, the connector cables are on top. We place the cable from below. 
This allows us to position the cables in the neck piece. 

* The connector cable should be about 5 cm long (A).
* The cables are connected on the backside (B, bottom). 
* The battery will remain on the front (B, top)
* Place the newly connected amplifier into the casing (C).
* Place the amp cover (D), and screw it on with the original screws (D)

| Add connectors|
|--------|
|![Add connectors](./img/Panel_connecting_connectors.png  "Add connectors")*Added cEEGrid connectors*|




